{% extends 'main/index.html.twig' %}

{% block title %}{{ 'process.show.title'|trans }}{% endblock %}

{% block content %}

  <div class="row">
    <div class="col">
      <h1 class="float-left">{{ 'process.show.title'|trans }} {{ process.id }}</h1>
      <a href="" class="btn btn-sm btn-outline-dark float-right"><i class="fas {{ iconClass('print') }} mr-2" ></i>{{ 'process.btns.print'|trans }}</a>
      <a href="TODO: report path" class="btn btn-sm btn-outline-primary float-right mr-3"><i class="fas {{ iconClass('report') }} mr-2" ></i>{{ 'process.btns.create_report'|trans }}</a>
      <a href="{{ path('reminder_new', {'process': process.id}) }}" class="btn btn-sm btn-outline-warning float-right mr-3"><i class="fas {{ iconClass('reminder') }} mr-2" ></i>{{ 'reminder.btns.create'|trans }}</a>
    </div>
  </div>
  <div class="row">
    <div class="col">
      <div class="bg-success-light p-3 mb-3">
        <div class="row">
          <div class="col-lg-3">
            <dl class="row">
              <dt class="col-sm-12">{{ 'common.table.created_by'|trans }}</dt>
              <dd class="col-sm-12">{{ process.createdBy }}</dd>
            </dl>
          </div>
          <div class="col-lg-3">
            <dl class="row">
              <dt class="col-sm-12">{{ 'common.table.created_at'|trans }}</dt>
              <dd class="col-sm-12">{{ process.createdAt|date('Y-m-d') }}</dd>
            </dl>
          </div>
          <div class="col-lg-3">
            <dl class="row">
              <dt class="col-sm-12">{{ 'common.table.updated_at'|trans }}</dt>
              <dd class="col-sm-12">{{ process.updatedAt|date('Y-m-d') }} {{ 'common.table.by'|trans }} {{ process.updatedBy }}</dd>
            </dl>
          </div>
          <div class="col-lg-3">
            <dl class="row">
              <dt class="col-sm-12">{{ 'process.table.case_worker'|trans }}</dt>
              <dd class="col-sm-12">{{ process.caseWorker }}</dd>
            </dl>
          </div>
          <div class="col-lg-3">
            <dl class="row">
              <dt class="col-sm-12">{{ 'process.table.process_type'|trans }}</dt>
              <dd class="col-sm-12">{{ process.processType }}</dd>
            </dl>
          </div>
          <div class="col-lg-3">
            <dl class="row">
              <dt class="col-sm-12">{{ 'process.table.channel'|trans }}</dt>
              <dd class="col-sm-12">{{ process.channel }}</dd>
            </dl>
          </div>
          <div class="col-lg-3">
            <dl class="row">
              <dt class="col-sm-12">{{ 'process.table.service'|trans }}</dt>
              <dd class="col-sm-12">{{ process.service }}</dd>
            </dl>
          </div>
        </div>
      </div>
    </div>
  </div>
  {% if process.reminders|length > 0 %}
    <div class="row">
      <div class="col">
        <div class="bg-warning-light p-3 mb-3">
          <h2>{{ 'process.table.reminders'|trans }} ({{ process.reminders|length }})</h2>
        </div>
      </div>
    </div>
  {% endif %}


  <div class="row">
    <div class="col">
      <div class="bg-light p-3 mb-3">
        <h2>{{ 'process.table.journal'|trans }}</h2>
        <h3>{{ 'process.table.diary'|trans }}</h3>
        {% include '@KontrolgruppenCore/journal_entry/_journal_entry_list.html.twig'  with { journalEntries: latestDiaryEntries, limit: 2 } %}
        <h3>{{ 'process.table.note'|trans }}</h3>
        {% include '@KontrolgruppenCore/journal_entry/_journal_entry_list.html.twig'  with { journalEntries: latestNoteEntries, limit: 2 } %}
        <h3>{{ 'process.table.internal_note'|trans }}</h3>
        {% include '@KontrolgruppenCore/journal_entry/_journal_entry_list.html.twig'  with { journalEntries: latestInternalNoteEntries, limit: 2 } %}
      </div>
    </div>
  </div>
  <div class="row">
    <div class="col">
      <a href="{{ path('process_index') }}" class="btn btn-light float-left">{{ 'common.back_to_list'|trans }}</a>

      <a href="{{ path('process_edit', {'id': process.id}) }}" class="btn btn-primary float-right pl-5 pr-5">{{ 'common.actions.edit'|trans }}</a>

      {{ include('process/_delete_form.html.twig') }}
    </div>
  </div>
{% endblock %}

{% block sidebar_right %}
  {{ include('process/_sidebar_process_info.html.twig') }}
  {{ include('process/_sidebar_process_type.html.twig') }}
  {{ include('process/_sidebar_activity.html.twig') }}
{% endblock %}
